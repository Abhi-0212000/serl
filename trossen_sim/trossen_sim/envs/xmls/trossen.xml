<mujoco model="widowx_ai">
  <compiler angle="radian" autolimits="true" meshdir="../../../../../../trossen_arm_description/meshes/wxai"/>

  <default>
    <default class="trossen">
      <joint armature="0.05" damping="0.5" axis="0 0 1"/>
      <default class="trossen/visual">
        <geom type="mesh" contype="0" conaffinity="0" group="2"/>
      </default>
      <default class="trossen/collision">
        <geom type="mesh" group="3"/>
      </default>
      <site size="0.001" rgba="0.5 0.5 0.5 0.3" group="4"/>
    </default>
    <default class="gripper">
      <joint axis="0 1 0" armature="0.001" damping="0.05"/>
    </default>
  </default>

  <asset>
    <material name="trossen_black" rgba="0.15 0.15 0.15 1"/>
    <material name="trossen_gray" rgba="0.5 0.5 0.5 1"/>
    
    <!-- WidowX AI meshes -->
    <mesh name="base_link" file="base_link.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_1" file="link_1.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_2" file="link_2.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_3" file="link_3.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_4" file="link_4.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_5" file="link_5.stl" scale="0.001 0.001 0.001"/>
    <mesh name="link_6" file="link_6.stl" scale="0.001 0.001 0.001"/>
    <mesh name="carriage_left" file="carriage_left.stl" scale="0.001 0.001 0.001"/>
    <mesh name="carriage_right" file="carriage_right.stl" scale="0.001 0.001 0.001"/>
  </asset>

  <worldbody>
    <body name="base_link" childclass="trossen">
      <inertial mass="0.81914" pos="0.00109 0.00033 0.05099"
        fullinertia="0.00120467 0.00118993 0.00043511 0.00000003 0.00000086 -0.00000207"/>
      <geom mesh="base_link" material="trossen_black" class="trossen/visual"/>
      <geom mesh="base_link" class="trossen/collision"/>
      
      <body name="link_1" pos="0 0 0.09695">
        <inertial mass="0.20617" pos="0.00003 -0.00001 0.03103"
          fullinertia="0.00019594 0.00019301 0.00004549 0.00000000 -0.00000001 0.00000000"/>
        <joint name="joint_0" type="revolute" range="-3.05433 3.05433" 
               effort="27.0" velocity="3.375"/>
        <site name="joint_0"/>
        <geom mesh="link_1" material="trossen_black" class="trossen/visual"/>
        <geom mesh="link_1" class="trossen/collision"/>
        
        <body name="link_2" pos="0 0 0.04125" quat="0.707107 0 0.707107 0">
          <inertial mass="0.20223" pos="0.06591 -0.00002 0.00634"
            fullinertia="0.00004614 0.00053128 0.00052348 -0.00000001 -0.00001084 0.00000000"/>
          <joint name="joint_1" type="revolute" axis="0 1 0" range="0 3.14159"
                 effort="27.0" velocity="3.375"/>
          <site name="joint_1"/>
          <geom mesh="link_2" material="trossen_black" class="trossen/visual"/>
          <geom mesh="link_2" class="trossen/collision"/>
          
          <body name="link_3" pos="0.15 0 0">
            <inertial mass="0.13769" pos="0.05283 0.00001 0.00014"
              fullinertia="0.00002157 0.00018368 0.00018224 0.00000000 -0.00000083 0.00000000"/>
            <joint name="joint_2" type="revolute" axis="0 1 0" range="0 2.35619"
                   effort="27.0" velocity="3.375"/>
            <site name="joint_2"/>
            <geom mesh="link_3" material="trossen_black" class="trossen/visual"/>
            <geom mesh="link_3" class="trossen/collision"/>
            
            <body name="link_4" pos="0.12 0 0">
              <inertial mass="0.11982" pos="0.04337 -0.00001 -0.00326"
                fullinertia="0.00002122 0.00012145 0.00011942 0.00000000 0.00001083 0.00000000"/>
              <joint name="joint_3" type="revolute" axis="0 1 0" range="-1.5708 1.5708"
                     effort="7.0" velocity="7.0"/>
              <site name="joint_3"/>
              <geom mesh="link_4" material="trossen_black" class="trossen/visual"/>
              <geom mesh="link_4" class="trossen/collision"/>
              
              <body name="link_5" pos="0.09465 0 0">
                <inertial mass="0.09711" pos="0.02895 0.00000 0.01277"
                  fullinertia="0.00002290 0.00004260 0.00003252 0.00000000 -0.00000549 0.00000000"/>
                <joint name="joint_4" type="revolute" range="-1.5708 1.5708"
                       effort="7.0" velocity="7.0"/>
                <site name="joint_4"/>
                <geom mesh="link_5" material="trossen_black" class="trossen/visual"/>
                <geom mesh="link_5" class="trossen/collision"/>
                
                <body name="link_6" pos="0.02895 0 -0.0455">
                  <inertial mass="0.07073" pos="0.04629 0.00000 -0.00025"
                    fullinertia="0.00000488 0.00048759 0.00001086 0.00000000 0.00000010 0.00000004"/>
                  <joint name="joint_5" type="revolute" axis="1 0 0" range="-3.14159 3.14159"
                         effort="7.0" velocity="7.0"/>
                  <site name="joint_5"/>
                  <geom mesh="link_6" material="trossen_black" class="trossen/visual"/>
                  <geom mesh="link_6" class="trossen/collision"/>
                  
                  <!-- Gripper -->
                  <body name="carriage_left" pos="0.0865 0.023 0">
                    <inertial mass="0.05036" pos="-0.00890 -0.00404 -0.00458"
                      fullinertia="0.00001736 0.00000591 0.00001378 -0.00000165 -0.00000104 -0.00000172"/>
                    <joint name="left_carriage_joint" type="prismatic" axis="0 1 0"
                           range="0 0.044" effort="400.0" velocity="0.0875" class="gripper"/>
                    <geom mesh="carriage_left" material="trossen_black" class="trossen/visual"/>
                    <geom mesh="carriage_left" class="trossen/collision"/>
                  </body>
                  
                  <body name="carriage_right" pos="0.0865 -0.023 0">
                    <inertial mass="0.05036" pos="-0.00890 0.00404 0.00458"
                      fullinertia="0.00001736 0.00000591 0.00001378 -0.00000165 -0.00000104 -0.00000172"/>
                    <joint name="right_carriage_joint" type="prismatic" axis="0 -1 0"
                           range="0 0.044" effort="400.0" velocity="0.0875" class="gripper"/>
                    <geom mesh="carriage_right" material="trossen_black" class="trossen/visual"/>
                    <geom mesh="carriage_right" class="trossen/collision"/>
                  </body>
                  
                  <!-- End-effector site (gripper tip) -->
                  <site name="ee_gripper" pos="0.156 0 0" quat="1 0 0 0"/>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <equality>
    <!-- Mimic constraint: right gripper follows left gripper -->
    <joint joint1="left_carriage_joint" joint2="right_carriage_joint" polycoef="0 1 0 0 0"/>
  </equality>

  <actuator>
    <!-- Joint actuators -->
    <motor class="trossen" name="actuator_0" joint="joint_0" ctrlrange="-27 27"/>
    <motor class="trossen" name="actuator_1" joint="joint_1" ctrlrange="-27 27"/>
    <motor class="trossen" name="actuator_2" joint="joint_2" ctrlrange="-27 27"/>
    <motor class="trossen" name="actuator_3" joint="joint_3" ctrlrange="-7 7"/>
    <motor class="trossen" name="actuator_4" joint="joint_4" ctrlrange="-7 7"/>
    <motor class="trossen" name="actuator_5" joint="joint_5" ctrlrange="-7 7"/>
    
    <!-- Gripper actuator (controls left carriage, right follows via equality) -->
    <position name="gripper_actuator" joint="left_carriage_joint" ctrlrange="0 0.044" kp="100"/>
  </actuator>

  <sensor>
    <!-- Joint positions -->
    <jointpos name="trossen/joint_0_pos" joint="joint_0"/>
    <jointpos name="trossen/joint_1_pos" joint="joint_1"/>
    <jointpos name="trossen/joint_2_pos" joint="joint_2"/>
    <jointpos name="trossen/joint_3_pos" joint="joint_3"/>
    <jointpos name="trossen/joint_4_pos" joint="joint_4"/>
    <jointpos name="trossen/joint_5_pos" joint="joint_5"/>
    
    <!-- Joint velocities -->
    <jointvel name="trossen/joint_0_vel" joint="joint_0"/>
    <jointvel name="trossen/joint_1_vel" joint="joint_1"/>
    <jointvel name="trossen/joint_2_vel" joint="joint_2"/>
    <jointvel name="trossen/joint_3_vel" joint="joint_3"/>
    <jointvel name="trossen/joint_4_vel" joint="joint_4"/>
    <jointvel name="trossen/joint_5_vel" joint="joint_5"/>
    
    <!-- Joint torques -->
    <torque name="trossen/joint_0_torque" site="joint_0"/>
    <torque name="trossen/joint_1_torque" site="joint_1"/>
    <torque name="trossen/joint_2_torque" site="joint_2"/>
    <torque name="trossen/joint_3_torque" site="joint_3"/>
    <torque name="trossen/joint_4_torque" site="joint_4"/>
    <torque name="trossen/joint_5_torque" site="joint_5"/>
    
    <!-- End-effector pose -->
    <framepos name="trossen/ee_pos" objtype="site" objname="ee_gripper"/>
    <framequat name="trossen/ee_quat" objtype="site" objname="ee_gripper"/>
    <framelinvel name="trossen/ee_vel" objtype="site" objname="ee_gripper"/>
    
    <!-- Gripper -->
    <jointpos name="trossen/gripper_pos" joint="left_carriage_joint"/>
  </sensor>
</mujoco>
